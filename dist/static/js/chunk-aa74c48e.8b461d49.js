(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-aa74c48e"],{"66b4":function(t,e,i){"use strict";i.d(e,"t",(function(){return a})),i.d(e,"w",(function(){return n})),i.d(e,"p",(function(){return o})),i.d(e,"B",(function(){return l})),i.d(e,"q",(function(){return d})),i.d(e,"C",(function(){return c})),i.d(e,"a",(function(){return s})),i.d(e,"u",(function(){return u})),i.d(e,"g",(function(){return f})),i.d(e,"l",(function(){return m})),i.d(e,"x",(function(){return h})),i.d(e,"b",(function(){return p})),i.d(e,"h",(function(){return g})),i.d(e,"m",(function(){return b})),i.d(e,"z",(function(){return _})),i.d(e,"c",(function(){return v})),i.d(e,"v",(function(){return y})),i.d(e,"i",(function(){return k})),i.d(e,"s",(function(){return j})),i.d(e,"f",(function(){return O})),i.d(e,"k",(function(){return D})),i.d(e,"r",(function(){return x})),i.d(e,"D",(function(){return $})),i.d(e,"e",(function(){return S})),i.d(e,"j",(function(){return w})),i.d(e,"n",(function(){return C})),i.d(e,"A",(function(){return B})),i.d(e,"y",(function(){return A})),i.d(e,"d",(function(){return K})),i.d(e,"o",(function(){return M}));var r=i("b775");function a(t){return Object(r["a"])({url:"/admin/car",method:"get",params:t})}function n(t,e){return Object(r["a"])({url:"/admin/car/".concat(t),method:"put",data:e})}function o(t){return Object(r["a"])({url:"/admin/car-test",method:"get",params:t})}function l(t){return Object(r["a"])({url:"/admin/car-test",method:"put",data:t})}function d(t){return Object(r["a"])({url:"/admin/car-user",method:"get",params:t})}function c(t){return Object(r["a"])({url:"/admin/car-user",method:"put",data:t})}function s(t){return Object(r["a"])({url:"/admin/car",method:"post",data:t})}function u(t){return Object(r["a"])({url:"/admin/car/".concat(t),method:"get"})}function f(t){return Object(r["a"])({url:"/admin/car",method:"delete",data:t})}function m(t){return Object(r["a"])({url:"/admin/car-brand",method:"get",params:t})}function h(t,e){return Object(r["a"])({url:"/admin/car-brand/".concat(t),method:"put",data:e})}function p(t){return Object(r["a"])({url:"/admin/car-brand",method:"post",data:t})}function g(t){return Object(r["a"])({url:"/admin/car-brand",method:"delete",data:t})}function b(t){return Object(r["a"])({url:"/admin/car-model",method:"get",params:t})}function _(t,e){return Object(r["a"])({url:"/admin/car-model/".concat(t),method:"put",data:e})}function v(t){return Object(r["a"])({url:"/admin/car-model",method:"post",data:t})}function y(t){return Object(r["a"])({url:"/admin/car-model/".concat(t),method:"get"})}function k(t){return Object(r["a"])({url:"/admin/car-model",method:"delete",data:t})}function j(t){return Object(r["a"])({url:"/admin/car-year",method:"get",params:t})}function O(t){return Object(r["a"])({url:"/admin/car-year",method:"post",data:t})}function D(t){return Object(r["a"])({url:"/admin/car-year",method:"delete",data:t})}function x(t){return Object(r["a"])({url:"/admin/car-vehicle",method:"get",params:t})}function $(t,e){return Object(r["a"])({url:"/admin/car-vehicle/".concat(t),method:"put",data:e})}function S(t){return Object(r["a"])({url:"/admin/car-vehicle",method:"post",data:t})}function w(t){return Object(r["a"])({url:"/admin/car-vehicle",method:"delete",data:t})}function C(t){return Object(r["a"])({url:"/admin/car-sell",method:"get",params:t})}function B(t){return Object(r["a"])({url:"/admin/car/".concat(t,"/sell"),method:"put"})}function A(t){return Object(r["a"])({url:"/admin/car/".concat(t,"/copy"),method:"put"})}function K(t){return Object(r["a"])({url:"/admin/car-sell-log",method:"post",data:t})}function M(t){return Object(r["a"])({url:"/admin/car-sell-log",method:"get",params:t})}},"91b6":function(t,e,i){"use strict";i.d(e,"a",(function(){return a}));var r=i("b775");function a(t){return Object(r["a"])({url:"/admin/file",method:"post",param:t,headers:{"Content-Type":"multipart/form-data"},transformRequest:[function(){return t}]})}},b10d:function(t,e,i){},b9a3:function(t,e,i){"use strict";i("b10d")},e269:function(t,e,i){"use strict";i.r(e);var r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"custom-tree-container app-container"},[i("el-button",{on:{click:function(e){return t.dialogShow("dialog_Brand")}}},[t._v("添加品牌")]),i("div",{staticClass:"block",staticStyle:{"margin-top":"30px"}},[i("el-tree",{ref:"tree",attrs:{data:t.listData,"node-key":"tree_key","expand-on-click-node":!1,lazy:"",load:t.treeLoad},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.node,a=e.data;return i("span",{staticClass:"custom-tree-node"},[i("span",[t._v(t._s(a.title))]),i("span",[i("el-button",{staticStyle:{"margin-left":"20px",color:"red"},attrs:{type:"text",size:"mini"},on:{click:function(e){return t.dialogShow(a.key,a)}}},[t._v(" "+t._s(a.btnText)+" ")]),"year_id"!=a.formKey?i("el-button",{staticStyle:{"margin-left":"20px",color:"red"},attrs:{type:"text",size:"mini"},on:{click:function(e){return t.editDialogShow(r,a)}}},[t._v(" 编辑 ")]):t._e(),i("el-button",{staticStyle:{"margin-left":"20px",color:"red"},attrs:{type:"text",size:"mini"},on:{click:function(e){return t.deleteHandle(r,a.id)}}},[t._v(" 删除 ")])],1)])}}])})],1),i("el-dialog",{attrs:{title:1==t.type?"添加品牌":"编辑品牌",visible:t.dialog_Brand,"show-close":!1},on:{"update:visible":function(e){t.dialog_Brand=e}}},[i("el-form",{attrs:{model:t.form,"label-width":"80px"}},[i("el-form-item",{attrs:{label:"品牌名称"}},[i("el-input",{attrs:{autocomplete:"off",placeholder:"单行输入"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),i("el-form-item",{attrs:{label:"车标logo"}},[i("el-upload",{staticClass:"avatar-uploader",attrs:{"show-file-list":!1,action:"Fake Action","http-request":t.httpRequest}},[t.imageUrl?i("img",{staticClass:"avatar line",attrs:{src:t.imageUrl}}):i("i",{staticClass:"el-icon-plus avatar-uploader-icon line"}),i("div",{staticStyle:{color:"#666"}},[t._v("只支持.jpg格式")])])],1)],1),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.dialog_Brand=!1}}},[t._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:t.submitBrand}},[t._v("提 交")])],1)],1),i("el-dialog",{attrs:{title:1==t.type?"添加车系":"编辑车系",visible:t.dialog_Series,"show-close":!1},on:{"update:visible":function(e){t.dialog_Series=e}}},[i("el-form",{attrs:{model:t.form,"label-width":"80px"}},[i("el-form-item",{attrs:{label:"车系名称"}},[i("el-input",{attrs:{autocomplete:"off",placeholder:"单行输入"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1)],1),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.dialog_Series=!1}}},[t._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:t.submitSeries}},[t._v("提 交")])],1)],1),i("el-dialog",{attrs:{title:1==t.type?"添加年款":"编辑年款",visible:t.dialog_Age,"show-close":!1},on:{"update:visible":function(e){t.dialog_Age=e}}},[i("el-form",{attrs:{model:t.form,"label-width":"80px"}},[i("el-form-item",{attrs:{label:"年款名称"}},[i("el-input",{attrs:{autocomplete:"off",placeholder:"单行输入"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1)],1),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.dialog_Age=!1}}},[t._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:t.submitAge}},[t._v("提 交")])],1)],1),i("el-dialog",{attrs:{title:"添加型号",visible:t.dialog_Model,"show-close":!1},on:{"update:visible":function(e){t.dialog_Model=e}}},[i("el-form",{attrs:{model:t.form,"label-width":"80px"}},[i("el-form-item",{attrs:{label:"型号名称"}},[i("el-input",{attrs:{autocomplete:"off",placeholder:"单行输入"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1)],1),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.dialog_Model=!1}}},[t._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:t.submitModel}},[t._v("提 交")])],1)],1)],1)},a=[],n=(i("4160"),i("498a"),i("159b"),i("66b4")),o=i("91b6"),l={data:function(){return{dialog_Brand:!1,dialog_Series:!1,dialog_Age:!1,dialog_Model:!1,form:{title:""},imageUrl:"",listData:[],opId:null,opData:{},type:1,parent_id:null}},created:function(){this.getBrand()},methods:{deleteHandle:function(t,e){1===t.level&&this.removeHandle(e,n["h"],t),2===t.level&&this.removeHandle(e,n["j"],t),3===t.level&&this.removeHandle(e,n["k"],t),4===t.level&&this.removeHandle(e,n["i"],t)},removeHandle:function(t,e,i){var r=this;this.$confirm("此操作将永久删除该项, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e({ids:t}).then((function(t){r.$refs.tree.remove(i.data.tree_key),r.$message({type:"success",message:"删除成功!"})}))})).catch((function(){}))},dialogShow:function(t,e){this.type=1,this[t]=!0,e&&(e.formKey&&(this.form[e.formKey]=e.id),this.opId=e.tree_key,this.opData=e)},editDialogShow:function(t,e){if(t.parent&&(this.parent_id=t.parent.data.id),this.type=2,1===t.level&&(this.dialog_Brand=!0),2===t.level&&(this.dialog_Series=!0),3===t.level&&(this.dialog_Age=!0),4===t.level)return this.$router.push("/car/editInfo?id="+e.id),!1;e&&(this.form["title"]=e.title,e.icon_id&&(this.form["icon_id"]=e.icon_id),e.icon_url&&(this.imageUrl=this.GLOBAL.BASE_URL+e.icon_url),e.formKey&&(this.form[e.formKey]=e.id),this.opId=e.tree_key,this.opData=e)},httpRequest:function(t){var e=this,i="image/jpeg"===t.file.type,r=t.file.size/1024/1024<2;if(!i)return this.$message.error("上传头像图片只能是 JPG 格式!"),!1;if(!r)return this.$message.error("上传头像图片大小不能超过 2MB!"),!1;var a=new FormData;a.append("file",t.file),Object(o["a"])(a).then((function(t){e.form["icon_id"]=t.data.file_id,e.imageUrl=e.GLOBAL.BASE_URL+t.data.file_url}))},submitBrand:function(){var t=this;return this.form.title&&0!=this.form.title.trim().length?this.form.icon_id?void(1==this.type?Object(n["b"])(this.form).then((function(e){t.listData.push({title:t.form.title,id:e.data.id,btnText:"添加车系",key:"dialog_Series",formKey:"brand_id",tree_key:"brand_id"+e.data.id}),t.form={title:""},t.imageUrl="",t.dialog_Brand=!1,t.$message({type:"success",message:"新增品牌成功!"})})):Object(n["x"])(this.form.brand_id,this.form).then((function(e){t.opData.title=t.form.title,t.form={title:""},t.imageUrl="",t.dialog_Brand=!1}))):(this.$message.error("请上传品牌Logo"),!1):(this.$message.error("请填写品牌名称"),!1)},submitSeries:function(){var t=this;if(!this.form.title||0==this.form.title.trim().length)return this.$message.error("请填写车系名称"),!1;1==this.type?Object(n["e"])(this.form).then((function(e){t.opData&&(t.opData.children||t.$set(t.opData,"children",[]),t.opData.children.push({title:t.form.title,id:e.data.id,btnText:"添加年款",key:"dialog_Age",formKey:"vehicle_id",tree_key:"vehicle_id"+e.data.id})),t.form={title:""},t.dialog_Series=!1,t.$message({type:"success",message:"新增车系成功!"})})):(this.form["brand_id"]=this.parent_id,Object(n["D"])(this.form.vehicle_id,this.form).then((function(e){t.opData.title=t.form.title,t.form={title:""},t.dialog_Series=!1})))},submitAge:function(){var t=this;if(!this.form.title||0==this.form.title.trim().length)return this.$message.error("请填写年款名称"),!1;Object(n["f"])(this.form).then((function(e){t.opData&&(t.opData.children||t.$set(t.opData,"children",[]),t.opData.children.push({title:t.form.title,id:e.data.id,btnText:"添加型号",key:"dialog_Model",formKey:"year_id",tree_key:"year_id"+e.data.id})),t.form={title:""},t.dialog_Age=!1,t.$message({type:"success",message:"新增年款成功!"})}))},submitModel:function(){var t=this;if(!this.form.title||0==this.form.title.trim().length)return this.$message.error("请填写型号名称"),!1;Object(n["c"])(this.form).then((function(e){t.opData&&(t.opData.children||t.$set(t.opData,"children",[]),t.opData.children.push({title:t.form.title,id:e.data.id,formKey:"models_id",tree_key:"models_id"+e.data.id})),t.form={title:""},t.dialog_Model=!1,t.$message({type:"success",message:"新增型号成功!"})}))},treeLoad:function(t,e){return 0===t.level||4===t.level?e([]):1===t.level?this.getCarVehicleData(t.data,e):2===t.level?this.getCarYearsData(t.data,e):3===t.level?this.getCarModelsData(t.data,e):void 0},getBrand:function(){var t=this,e=this;Object(n["l"])().then((function(i){var r=i.data.items;t.setData(r),e.listData=i.data.items}))},setData:function(t){var e=this;t&&t.forEach((function(t){t["btnText"]="添加车系",t["key"]="dialog_Series",t["formKey"]="brand_id",t["tree_key"]="brand_id"+t.id,t["children"]=[],t.children&&e.setData(t.children)}))},getCarVehicleData:function(t,e){var i=this;Object(n["r"])({brand_id:t.id}).then((function(r){var a=r.data.items;a&&a.length>0&&a.forEach((function(t){t["btnText"]="添加年款",t["key"]="dialog_Age",t["formKey"]="vehicle_id",t["tree_key"]="vehicle_id"+t.id,t["children"]=[]})),i.$refs["tree"].updateKeyChildren(t.tree_key,a),e(r.data.items)}))},getCarYearsData:function(t,e){var i=this;Object(n["s"])({vehicle_id:t.id}).then((function(r){var a=r.data.items;a&&a.length>0&&a.forEach((function(t){t["btnText"]="添加型号",t["key"]="dialog_Model",t["formKey"]="year_id",t["tree_key"]="year_id"+t.id,t["children"]=[]})),i.$refs["tree"].updateKeyChildren(t.tree_key,a),e(r.data.items)}))},getCarModelsData:function(t,e){var i=this;Object(n["m"])({year_id:t.id}).then((function(r){var a=r.data.items;a&&a.length>0&&a.forEach((function(t){t["formKey"]="models_id",t["tree_key"]="models_id"+t.id})),i.$refs["tree"].updateKeyChildren(t.tree_key,a),e(r.data.items)}))}}},d=l,c=(i("b9a3"),i("2877")),s=Object(c["a"])(d,r,a,!1,null,"80864d5e",null);e["default"]=s.exports}}]);