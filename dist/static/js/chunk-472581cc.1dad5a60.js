(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-472581cc"],{"230c":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("el-button",{attrs:{type:"primary"},on:{click:t.handleAddArticle}},[t._v("添加文章")]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],ref:"dragTable",staticStyle:{width:"100%","margin-top":"30px"},attrs:{data:t.articleList,"row-key":"id",fit:"","highlight-current-row":"",border:""}},[a("el-table-column",{attrs:{align:"center",label:"ID"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.id)+" ")]}}])}),a("el-table-column",{attrs:{align:"center",label:"文章名称"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.title)+" ")]}}])}),a("el-table-column",{attrs:{align:"center",label:"分类"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",{attrs:{type:t._f("statusFilter")(e.row.type)}},[t._v(" "+t._s(t._f("statusShowFilter")(e.row.type))+" ")])]}}])}),a("el-table-column",{attrs:{align:"center",label:"是否显示"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini",type:"1"==e.row.is_show?"success":"danger"},on:{click:function(a){return t.handleShow(e.row.id)}}},[t._v(t._s("1"==e.row.is_show?"是":"否"))])]}}])}),a("el-table-column",{attrs:{align:"center",label:"添加时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.create_at)+" ")]}}])}),a("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return t.handleEdit(e)}}},[t._v(" 编辑 ")]),a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){return t.handleDelete(e)}}},[t._v("删除")])]}}])})],1),a("pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total>0"}],attrs:{total:t.total,page:t.listQuery.page,limit:t.listQuery.per_page},on:{"update:page":function(e){return t.$set(t.listQuery,"page",e)},"update:limit":function(e){return t.$set(t.listQuery,"per_page",e)},pagination:t.getArticle}}),a("el-dialog",{attrs:{visible:t.dialogVisible,title:"edit"===t.dialogType?"编辑文章":"新增文章"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-form",{attrs:{model:t.article,"label-position":"left","label-width":"100px"}},[a("el-form-item",{attrs:{label:"名称",required:""}},[a("el-input",{attrs:{placeholder:"文章名称"},model:{value:t.article.title,callback:function(e){t.$set(t.article,"title",e)},expression:"article.title"}})],1),a("el-form-item",{attrs:{label:"文章分类",required:""}},[a("el-select",{staticClass:"filter-item",staticStyle:{width:"130px"},attrs:{placeholder:"请选择",clearable:""},model:{value:t.article.type,callback:function(e){t.$set(t.article,"type",e)},expression:"article.type"}},t._l(t.statusShow,(function(t,e){return a("el-option",{key:e,attrs:{label:t,value:e}})})),1)],1),a("el-form-item",{attrs:{label:"缩略图",required:""}},[t.dialogVisible?a("Upload",{attrs:{pic_url:t.article.article_thumb_url},model:{value:t.article.article_thumb,callback:function(e){t.$set(t.article,"article_thumb",e)},expression:"article.article_thumb"}}):t._e(),a("p",[t._v("建议图片宽度750，高度200-950")])],1),a("el-form-item",{attrs:{label:"简介",required:""}},[a("el-input",{attrs:{type:"textarea",placeholder:"简介"},model:{value:t.article.introduce,callback:function(e){t.$set(t.article,"introduce",e)},expression:"article.introduce"}})],1),a("el-form-item",{attrs:{label:"内容",required:""}},[t.dialogVisible?a("Tinymce",{attrs:{height:400,width:"80%"},model:{value:t.article.article_content,callback:function(e){t.$set(t.article,"article_content",e)},expression:"article.article_content"}}):t._e()],1)],1),a("div",{staticStyle:{"text-align":"right"}},[a("el-button",{attrs:{type:"danger"},on:{click:function(e){t.dialogVisible=!1}}},[t._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.confirmArticle}},[t._v("提交")])],1)],1)],1)},n=[],r=(a("a434"),a("96cf"),a("1da1")),l=a("680f"),c=a("6724"),s=a("8256"),o=a("333d"),u=a("b775");function d(t){return Object(u["a"])({url:"/admin/article",method:"get",params:t})}function p(t,e){return Object(u["a"])({url:"/admin/article/".concat(t),method:"put",data:e})}function f(t){return Object(u["a"])({url:"/admin/article/".concat(t,"/show"),method:"put"})}function m(t){return Object(u["a"])({url:"/admin/article",method:"post",data:t})}function h(t){return Object(u["a"])({url:"/admin/article/".concat(t),method:"get"})}function g(t){return Object(u["a"])({url:"/admin/article",method:"delete",data:t})}var b={1:"行业新闻",2:"时事新闻",3:"常见问题"},v={},_={components:{Pagination:o["a"],Upload:l["a"],Tinymce:s["a"]},directives:{waves:c["a"]},filters:{statusFilter:function(t){var e={2:"info",1:"success",3:"danger"};return e[t]},statusShowFilter:function(t){return b[t]}},data:function(){return{article:Object.assign({},v),articleList:[],statusShow:b,dialogVisible:!1,dialogType:"new",total:0,listLoading:!0,listQuery:{page:1,per_page:20}}},created:function(){this.getArticle()},methods:{getArticle:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.listLoading=!0,e.next=3,d(t.listQuery);case 3:a=e.sent,t.articleList=a.data.items,t.total=a.data._meta.total_count,t.listLoading=!1;case 7:case"end":return e.stop()}}),e)})))()},handleAddArticle:function(){this.article=Object.assign({},v),this.dialogType="new",this.dialogVisible=!0},handleShow:function(t){var e=this;f(t).then((function(t){e.getArticle()}))},handleEdit:function(t){var e=this;h(t.row.id).then((function(t){e.article=t.data,e.dialogType="edit",e.dialogVisible=!0}))},handleDelete:function(t){var e=this,a=t.$index,i=t.row;this.$confirm("确定要删除此文章吗?","Warning",{confirmButtonText:"删除",cancelButtonText:"取消",type:"warning"}).then(Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,g({ids:i.id});case 2:e.articleList.splice(a,1),e.$message({type:"success",message:"删除成功!"});case 4:case"end":return t.stop()}}),t)})))).catch((function(t){console.error(t)}))},confirmArticle:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a="edit"===t.dialogType,!a){e.next=8;break}return i=t.article.id,delete t.article.id,e.next=6,p(i,t.article);case 6:e.next=10;break;case 8:return e.next=10,m(t.article);case 10:t.getArticle(),t.dialogVisible=!1,t.$notify({title:"Success",message:"操作成功！",type:"success"});case 13:case"end":return e.stop()}}),e)})))()},handleClose:function(){this.article={}}}},w=_,y=(a("c970"),a("2877")),k=Object(y["a"])(w,i,n,!1,null,"2ad735bc",null);e["default"]=k.exports},3250:function(t,e,a){"use strict";a("9fe9")},"680f":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"string","show-file-list":!1,"http-request":t.upload,"on-success":t.handleImageSuccess,"on-error":t.handleImageError}},[t.imageUrl?a("img",{staticClass:"avatar",attrs:{src:t.imageUrl}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)},n=[],r=a("91b6"),l={props:{value:"",pic_url:""},data:function(){return{dataObj:{},tempUrl:"",imageUrl:this.pic_url}},watch:{value:function(t){this.value=t}},methods:{upload:function(t){var e=this,a=new FormData;a.append("file",t.file),Object(r["a"])(a).then((function(t){e.emitInput(t.data.file_id),e.imageUrl=t.data.file_url}))},emitInput:function(t){this.$emit("input",t)},handleImageSuccess:function(t){console.log(this.value),this.emitInput(this.tempUrl),this.value=this.tempUrl},handleImageError:function(t,e,a){console.log(t)}}},c=l,s=(a("3250"),a("2877")),o=Object(s["a"])(c,i,n,!1,null,null,null);e["a"]=o.exports},"9fe9":function(t,e,a){},bf96:function(t,e,a){},c970:function(t,e,a){"use strict";a("bf96")}}]);